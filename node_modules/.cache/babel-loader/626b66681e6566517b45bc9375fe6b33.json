{"ast":null,"code":"var _jsxFileName = \"/home/basti/Desktop/proyecto/2/Prueba_requisito/client/src/pages/write/Write.jsx\",\n    _s = $RefreshSig$();\n\nimport { useContext, useState, useEffect } from \"react\";\nimport \"./write.css\";\nimport axios from \"axios\";\nimport { Context } from \"../../context/Context\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Write() {\n  _s();\n\n  const [cats, setCats] = useState([]);\n  useEffect(() => {\n    const getCats = async () => {\n      const res = await axios.get(\"/categories\");\n      setCats(res.data);\n    };\n\n    getCats();\n  }, []);\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [title, setTitle] = useState(\"\");\n  const [author, setAuthor] = useState(\"\");\n  const [date, setDate] = useState(\"\");\n  const [desc, setDesc] = useState(\"\");\n  const [state, setState] = useState(\"\");\n  const [categorie, setCategorie] = useState(\"\");\n  const [collaborator, setCollaborator] = useState(\"\");\n  const [file, setFile] = useState(null);\n  const {\n    user\n  } = useContext(Context);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    var finalState = \"\";\n    var finalCategorie = \"\";\n\n    if (state === \"\") {\n      finalState = \"Proposal of thesis\";\n    } else {\n      finalState = state;\n    }\n\n    if (categorie === \"\") {\n      finalCategorie = \"Arquitectura y Urbanismo\";\n    } else {\n      finalCategorie = categorie;\n    }\n\n    const newPost = {\n      username: user.username,\n      userPhone: user.phone,\n      userEmail: user.email,\n      author: author,\n      state: finalState,\n      date: date,\n      title: title,\n      collaborator: collaborator,\n      categories: finalCategorie,\n      desc: desc\n    };\n\n    if (selectedFile) {\n      const data = new FormData();\n      const filename = Date.now() + selectedFile.name;\n      data.append(\"name\", filename);\n      data.append(\"file\", selectedFile);\n      newPost.pdf = filename;\n\n      try {\n        await axios.post(\"/upload\", data);\n      } catch (err) {}\n    }\n\n    if (file) {\n      const data = new FormData();\n      const filename = Date.now() + file.name;\n      data.append(\"name\", filename);\n      data.append(\"file\", file);\n      newPost.photo = filename;\n\n      try {\n        await axios.post(\"/upload\", data);\n      } catch (err) {}\n    }\n\n    try {\n      const res = await axios.post(\"/posts\", newPost);\n      window.location.replace(\"/post/\" + res.data._id);\n    } catch (err) {}\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"write\",\n    children: [file && /*#__PURE__*/_jsxDEV(\"img\", {\n      className: \"writeImg\",\n      src: URL.createObjectURL(file),\n      alt: \"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"writeForm\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"writeFormGroup\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"fileInput\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"writeIcon fas fa-plus\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"fileInput\",\n          style: {\n            display: \"none\"\n          },\n          onChange: e => setFile(e.target.files[0])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Title\",\n          className: \"writeInput\",\n          autoFocus: true,\n          onChange: e => setTitle(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"writeFormGroup2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Author\",\n          className: \"writeInputAuthor\",\n          autoFocus: true,\n          onChange: e => setAuthor(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"labelDate\",\n          children: \" Date\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          id: \"start\",\n          className: \"writeDate\",\n          name: \"trip-start\",\n          min: \"1960-01-01\",\n          max: \"2022-01-01\",\n          onChange: e => setDate(e.target.value.toString())\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"writeFormGroup2\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"lang\",\n          className: \"labelOption\",\n          children: \"State\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"languages\",\n          id: \"lang\",\n          className: \"writeOption\",\n          onChange: e => setState(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"proposal of thesis\",\n            children: \"Proposal of thesis\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Developing\",\n            children: \"Developing\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"finished\",\n            children: \"Finished\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"lang\",\n          className: \"labelState\",\n          children: \"Categorie\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"languages\",\n          id: \"lang\",\n          className: \"writeOption\",\n          onChange: e => setCategorie(e.target.value),\n          children: cats.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n            className: \"sidebarListItem\",\n            children: c.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"writeFormGroup\",\n        children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n          placeholder: \"Description...\",\n          type: \"text\",\n          className: \"writeInput2 writeText\",\n          onChange: e => setDesc(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"writeFormGroup2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Collaborator\",\n          className: \"writeInputAuthor\",\n          autoFocus: true,\n          onChange: e => setCollaborator(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pdf\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"fileInput2\",\n            children: \"PDF\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"fileInput2\",\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              class: \"pdfIcon fas fa-file-pdf\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            className: \"pdfIcon\",\n            id: \"fileInput2\",\n            style: {\n              display: \"none\"\n            },\n            onChange: e => setSelectedFile(e.target.files[0])\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this), selectedFile && /*#__PURE__*/_jsxDEV(\"i\", {\n            class: \"Check fas fa-check-circle\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 30\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"writeSubmit\",\n        type: \"submit\",\n        children: \"Publish\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Write, \"eIHo+MddoPuTT1JQQjopok4UTM0=\");\n\n_c = Write;\n\nvar _c;\n\n$RefreshReg$(_c, \"Write\");","map":{"version":3,"sources":["/home/basti/Desktop/proyecto/2/Prueba_requisito/client/src/pages/write/Write.jsx"],"names":["useContext","useState","useEffect","axios","Context","Write","cats","setCats","getCats","res","get","data","selectedFile","setSelectedFile","title","setTitle","author","setAuthor","date","setDate","desc","setDesc","state","setState","categorie","setCategorie","collaborator","setCollaborator","file","setFile","user","handleSubmit","e","preventDefault","finalState","finalCategorie","newPost","username","userPhone","phone","userEmail","email","categories","FormData","filename","Date","now","name","append","pdf","post","err","photo","window","location","replace","_id","URL","createObjectURL","display","target","files","value","toString","map","c"],"mappings":"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","sourcesContent":["import { useContext, useState, useEffect } from \"react\";\nimport \"./write.css\";\nimport axios from \"axios\";\nimport { Context } from \"../../context/Context\";\n\nexport default function Write() {\n  const [cats, setCats] = useState([]);\n  useEffect(() => {\n    const getCats = async () => {\n      const res = await axios.get(\"/categories\");\n      setCats(res.data);\n    };\n    getCats();\n  }, []);\n\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [title, setTitle] = useState(\"\");\n  const [author, setAuthor] = useState(\"\");\n  const [date, setDate] = useState(\"\");\n  const [desc, setDesc] = useState(\"\");\n  const [state, setState] = useState(\"\");\n  const [categorie, setCategorie] = useState(\"\");\n  const [collaborator, setCollaborator] = useState(\"\");\n  const [file, setFile] = useState(null);\n  const { user } = useContext(Context);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    var finalState = \"\";\n    var finalCategorie = \"\";\n    if (state === \"\") {\n      finalState = \"Proposal of thesis\";\n    } else {\n      finalState = state;\n    }\n\n    if (categorie === \"\") {\n      finalCategorie = \"Arquitectura y Urbanismo\";\n    } else {\n      finalCategorie = categorie;\n    }\n\n    const newPost = {\n      username: user.username,\n      userPhone: user.phone,\n      userEmail: user.email,\n      author: author,\n      state: finalState,\n      date: date,\n      title: title,\n      collaborator: collaborator,\n      categories: finalCategorie,\n      desc: desc,\n    };\n    if (selectedFile) {\n      const data = new FormData();\n      const filename = Date.now() + selectedFile.name;\n      data.append(\"name\", filename);\n      data.append(\"file\", selectedFile);\n      newPost.pdf = filename;\n      try {\n        await axios.post(\"/upload\", data);\n      } catch (err) {}\n    }\n\n    if (file) {\n      const data = new FormData();\n      const filename = Date.now() + file.name;\n      data.append(\"name\", filename);\n      data.append(\"file\", file);\n      newPost.photo = filename;\n      try {\n        await axios.post(\"/upload\", data);\n      } catch (err) {}\n    }\n\n    try {\n      const res = await axios.post(\"/posts\", newPost);\n      window.location.replace(\"/post/\" + res.data._id);\n    } catch (err) {}\n  };\n  return (\n    <div className=\"write\">\n      {file && (\n        <img className=\"writeImg\" src={URL.createObjectURL(file)} alt=\"\" />\n      )}\n      <form className=\"writeForm\" onSubmit={handleSubmit}>\n        <div className=\"writeFormGroup\">\n          <label htmlFor=\"fileInput\">\n            <i className=\"writeIcon fas fa-plus\"></i>\n          </label>\n          <input\n            type=\"file\"\n            id=\"fileInput\"\n            style={{ display: \"none\" }}\n            onChange={(e) => setFile(e.target.files[0])}\n          />\n          <input\n            type=\"text\"\n            placeholder=\"Title\"\n            className=\"writeInput\"\n            autoFocus={true}\n            onChange={(e) => setTitle(e.target.value)}\n          />\n        </div>\n\n        <div className=\"writeFormGroup2\">\n          <input\n            type=\"text\"\n            placeholder=\"Author\"\n            className=\"writeInputAuthor\"\n            autoFocus={true}\n            onChange={(e) => setAuthor(e.target.value)}\n          />\n          <label className=\"labelDate\"> Date</label>\n          <input\n            type=\"date\"\n            id=\"start\"\n            className=\"writeDate\"\n            name=\"trip-start\"\n            min=\"1960-01-01\"\n            max=\"2022-01-01\"\n            onChange={(e) => setDate(e.target.value.toString())}\n          />\n        </div>\n\n        <div className=\"writeFormGroup2\">\n          <label for=\"lang\" className=\"labelOption\">\n            State\n          </label>\n          <select\n            name=\"languages\"\n            id=\"lang\"\n            className=\"writeOption\"\n            onChange={(e) => setState(e.target.value)}\n          >\n            <option value=\"proposal of thesis\">Proposal of thesis</option>\n            <option value=\"Developing\">Developing</option>\n            <option value=\"finished\">Finished</option>\n          </select>\n\n          <label for=\"lang\" className=\"labelState\">\n            Categorie\n          </label>\n          <select\n            name=\"languages\"\n            id=\"lang\"\n            className=\"writeOption\"\n            onChange={(e) => setCategorie(e.target.value)}\n          >\n            {cats.map((c) => (\n              <option className=\"sidebarListItem\">{c.name}</option>\n            ))}\n          </select>\n        </div>\n        <div className=\"writeFormGroup\">\n          <textarea\n            placeholder=\"Description...\"\n            type=\"text\"\n            className=\"writeInput2 writeText\"\n            onChange={(e) => setDesc(e.target.value)}\n          ></textarea>\n        </div>\n        <div className=\"writeFormGroup2\">\n          <input\n            type=\"text\"\n            placeholder=\"Collaborator\"\n            className=\"writeInputAuthor\"\n            autoFocus={true}\n            onChange={(e) => setCollaborator(e.target.value)}\n          />\n          <div className=\"pdf\">\n            <label htmlFor=\"fileInput2\">PDF</label>\n            <label htmlFor=\"fileInput2\">\n              <i class=\"pdfIcon fas fa-file-pdf\"></i>\n            </label>\n            <input\n              type=\"file\"\n              className=\"pdfIcon\"\n              id=\"fileInput2\"\n              style={{ display: \"none\" }}\n              onChange={(e) => setSelectedFile(e.target.files[0])}\n            />\n            {selectedFile && <i class=\"Check fas fa-check-circle\"></i>}\n          </div>\n        </div>\n\n        <button className=\"writeSubmit\" type=\"submit\">\n          Publish\n        </button>\n      </form>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}